<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Highway Patrol ‚Äì System</title>

<style>
/* GLOBAL */
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;transition:.25s;}
body{background:#0a0f18;color:#e7ecf5;overflow-x:hidden;}

/* HEADER */
header{
    width:100%;
    height:95px;
    padding:18px 25px;
    background:linear-gradient(135deg,#0b1a33,#102752);
    border-bottom:3px solid #d4af37;
    display:flex;
    align-items:center;
    justify-content:space-between;
}

.header-left{
    display:flex;align-items:center;gap:15px;
}

.header-logo{
    width:55px;height:55px;
    background:url('https://i.ibb.co/XZg91Vrv/HP-Siegel-transparent-small.png') center/contain no-repeat;
    animation:pulseLogo 2s ease-in-out infinite;
    filter:drop-shadow(0 0 10px rgba(212,175,55,.7));
}
@keyframes pulseLogo {
    0%{transform:scale(1);}
    50%{transform:scale(1.08);}
    100%{transform:scale(1);}
}

.header-title{
    font-size:26px;font-weight:900;color:#d4af37;text-shadow:0 0 12px rgba(212,175,55,.7);
}

/* ADMIN ICON */
#leaderBtn{
    display:none;
    width:48px;height:48px;
    border-radius:50%;
    background:#1e3a8a;
    border:2px solid #d4af37;
    color:#d4af37;
    font-size:22px;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
}
#leaderBtn:hover{transform:scale(1.1);box-shadow:0 0 12px #d4af37;}

#logoutBtn{
    display:none;
    margin-left:15px;
    padding:10px 18px;
    background:#1e3a8a;
    color:white;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}
#logoutBtn:hover{background:#2949a8;}

/* LOADING SCREEN */
#loadingScreen{
    position:fixed;inset:0;background:radial-gradient(circle,#102752,#0b1325 80%);
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    z-index:9999;
    animation:fadeOut 1s ease forwards;animation-delay:2.3s;
}
@keyframes fadeOut{to{opacity:0;visibility:hidden;}}

.loading-title{font-size:34px;color:#d4af37;font-weight:900;}

.loader{
    margin-top:20px;width:180px;height:4px;background:rgba(255,255,255,.2);
    border-radius:4px;overflow:hidden;position:relative;
}
.loader:before{
    content:"";position:absolute;top:0;left:-60px;width:60px;height:4px;background:#d4af37;
    border-radius:4px;animation:run 1.3s infinite ease-in-out;
}
@keyframes run{
    0%{left:-60px;}
    50%{left:180px;}
    100%{left:-60px;}
}

/* HOME */
#homeScreen{
    margin-top:calc(95px + 60px);
    text-align:center;
}

.home-title{
    font-size:40px;color:#d4af37;text-shadow:0 0 20px rgba(212,175,55,.75);
}

.home-btn{
    display:inline-block;
    margin-top:40px;
    padding:18px 40px;
    font-size:20px;
    background:#1e3a8a;
    color:white;
    border-radius:10px;
    font-weight:bold;
    cursor:pointer;
}
.home-btn:hover{background:#2949a8;transform:scale(1.05);}

/* LOGIN */
#loginScreen{
    display:none;
    justify-content:center;
    margin-top:50px;
}

.card{
    background:#111927;padding:20px;border-radius:12px;
    border-left:4px solid #d4af37;border:1px solid #1e3a8a;
    max-width:480px;margin:25px auto;
}

.card h3{color:#d4af37;margin-bottom:12px;}

input,select,textarea{
    width:100%;padding:12px;margin-top:6px;border-radius:8px;
    background:#0d1624;border:1px solid #1e3a8a;color:white;
}

button{
    margin-top:16px;padding:14px;width:100%;
    background:#1e3a8a;color:white;border-radius:8px;font-weight:bold;cursor:pointer;
}
button:hover{background:#2949a8;transform:scale(1.03);}

/* MAIN SYSTEM */
#mainScreen{display:none;padding:20px;margin-top:20px;}

.tabRow{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:20px;}

.tabBtn{
    padding:10px 18px;background:#0d1624;border:1px solid #1e3a8a;
    color:white;border-radius:8px;font-weight:bold;cursor:pointer;
}
.tabBtn:hover{background:#1e2b4a;}
.tabActive{background:#1e3a8a;border-color:#d4af37;}

.formCard{display:none;}
.formCard.active{display:block;}

.formCard h3{color:#d4af37;margin-bottom:8px;}

#leaderScreen{display:none;padding:25px;}
.leader-title{font-size:32px;color:#d4af37;margin-bottom:15px;}

.filterRow{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:20px;}

.filterBtn{
    padding:8px 18px;background:#0d1624;border:1px solid #1e3a8a;border-radius:8px;
    cursor:pointer;
}
.filterBtnActive{background:#1e3a8a;border-color:#d4af37;}

.logCard{
    background:#111927;padding:15px;margin-bottom:15px;border-radius:10px;
    border-left:4px solid #d4af37;box-shadow:0 0 8px rgba(212,175,55,.3);
}
.logCard h4{color:#d4af37;margin-bottom:6px;}

.backBtn{
    padding:14px 30px;background:#1e3a8a;color:white;
    border-radius:10px;font-weight:bold;cursor:pointer;margin-bottom:25px;
}
.backBtn:hover{background:#2949a8;}

@media(max-width:600px){.tabRow{flex-direction:column;}}

</style>
</head>
<body>

<!-- LOADING SCREEN -->
<div id="loadingScreen">
    <div class="loading-title">HIGHWAY PATROL SYSTEM</div>
    <div class="loader"></div>
</div>

<!-- HEADER -->
<header>
    <div class="header-left">
        <div class="header-logo"></div>
        <div class="header-title">HIGHWAY PATROL</div>
    </div>

    <div style="display:flex;align-items:center;">
        <div id="leaderBtn" onclick="openLeader()">üëë</div>
        <div id="logoutBtn" onclick="logout()">Logout</div>
    </div>
</header>

<!-- HOME -->
<div id="homeScreen">
    <h1 class="home-title">HIGHWAY PATROL SYSTEM</h1>
    <p>Interner Verwaltungsbereich der Highway Patrol</p>
    <div class="home-btn" onclick="openSystem()">üìÅ Zum System</div>
</div>

<!-- LOGIN -->
<div id="loginScreen">
    <div class="card">
        <h3>üîê Login</h3>
        <input id="loginUser" placeholder="Benutzername">
        <input id="loginPass" type="password" placeholder="Passwort">
        <button onclick="login()">Einloggen</button>
        <p id="loginError" style="color:red;margin-top:8px;"></p>
    </div>
</div>

<!-- MAIN -->
<div id="mainScreen">

    <div class="tabRow">
        <div class="tabBtn tabActive" onclick="openTab('melde',this)">Meldeaufforderung</div>
        <div class="tabBtn" onclick="openTab('einst',this)">Einstellung</div>
        <div class="tabBtn" onclick="openTab('kuend',this)">K√ºndigung</div>
        <div class="tabBtn" onclick="openTab('sank',this)">Sanktion</div>
        <div class="tabBtn" onclick="openTab('pos',this)">Positionswechsel</div>
        <div class="tabBtn" onclick="openTab('dienst',this)">Dienstnummer</div>
    </div>

    <!-- Melde -->
    <div class="card formCard active" id="tab_melde">
        <h3>üì¢ Meldeaufforderung</h3>
        <label>Name</label><input id="m_target">
        <label>Melden bei</label><input id="m_contact">
        <label>Grund</label><textarea id="m_reason"></textarea>
        <label>Ausgestellt von</label><input id="m_by">
        <button onclick="sendMelde()">Senden</button>
    </div>

    <!-- Einstellung -->
    <div class="card formCard" id="tab_einst">
        <h3>üü© Einstellung</h3>
        <label>Name</label><input id="e_name">
        <label>Rang</label><input id="e_rank">
        <label>Eingestellt von</label><input id="e_by">
        <button onclick="sendEinstellung()">Senden</button>
    </div>

    <!-- K√ºndigung -->
    <div class="card formCard" id="tab_kuend">
        <h3>üü• K√ºndigung</h3>
        <label>Name</label><input id="k_name">
        <label>Grund</label><textarea id="k_reason"></textarea>
        <label>Ausgestellt von</label><input id="k_by">
        <button onclick="sendK√ºndigung()">Senden</button>
    </div>

    <!-- Sanktion -->
    <div class="card formCard" id="tab_sank">
        <h3>‚ö†Ô∏è Sanktion</h3>
        <label>Name</label><input id="s_name">
        <label>Sanktionsart</label>
        <select id="s_type">
            <option>Geldstrafe</option>
            <option>M√ºndliche Verwarnung</option>
            <option>Schriftliche Verwarnung</option>
            <option>HP-Suspendierung</option>
        </select>
        <label>Sanktion</label><input id="s_amount">
        <label>Grund</label><textarea id="s_reason"></textarea>
        <label>Ausgestellt von</label><input id="s_by">
        <button onclick="sendSanktion()">Senden</button>
    </div>

    <!-- Position -->
    <div class="card formCard" id="tab_pos">
        <h3>üîÑ Positionswechsel</h3>
        <label>Name</label><input id="p_name">
        <label>Alte Position</label><input id="p_old">
        <label>Neue Position</label><input id="p_new">
        <label>Ausgestellt von</label><input id="p_by">
        <button onclick="sendPosition()">Senden</button>
    </div>

    <!-- Dienstnummer -->
    <div class="card formCard" id="tab_dienst">
        <h3>üî¢ Dienstnummer-√Ñnderung</h3>
        <label>Name</label><input id="d_name">
        <label>Alte Nummer</label><input id="d_old">
        <label>Neue Nummer</label><input id="d_new">
        <label>Ausgestellt von</label><input id="d_by">
        <button onclick="sendDienstnummer()">Senden</button>
    </div>

</div>

<!-- LEITER -->
<div id="leaderScreen">

    <button class="backBtn" onclick="closeLeader()">‚Üê Zur√ºck</button>
    <h1 class="leader-title">Leitungs√ºbersicht</h1>

    <div class="filterRow">
        <div class="filterBtn filterBtnActive" onclick="filterLogs('all',this)">Alle</div>
        <div class="filterBtn" onclick="filterLogs('melde',this)">Meldeauff.</div>
        <div class="filterBtn" onclick="filterLogs('einst',this)">Einstellung</div>
        <div class="filterBtn" onclick="filterLogs('kuend',this)">K√ºndigung</div>
        <div class="filterBtn" onclick="filterLogs('sank',this)">Sanktion</div>
        <div class="filterBtn" onclick="filterLogs('pos',this)">Position</div>
        <div class="filterBtn" onclick="filterLogs('dienst',this)">Dienstnummer</div>
    </div>

    <div id="logContainer"></div>

    <h2 style="margin-top:35px;color:#d4af37;">Benutzerverwaltung</h2>

    <div class="card" style="max-width:450px;margin-top:15px;">
        <h3>üë§ Neuen Account erstellen</h3>
        <label>Benutzername</label><input id="newUser">
        <label>Passwort</label><input id="newPass">
        <label>Rolle</label>
        <select id="newRole">
            <option value="member">Member</option>
            <option value="trainer">Trainer</option>
            <option value="admin">Admin</option>
        </select>
        <button onclick="createAccount()">Erstellen</button>
    </div>

    <h3 style="color:#d4af37;margin:20px 0 10px;">Vorhandene Accounts</h3>
    <div id="accountList"></div>

</div>

<script>
/* ALWAYS HIDE ADMIN ICON ON START */
leaderBtn.style.display = "none";

/* LOADING REMOVE */
setTimeout(()=>loadingScreen.style.display="none",2500);

/* OPEN SYSTEM */
function openSystem(){
    homeScreen.style.display="none";
    loginScreen.style.display="flex";
    leaderBtn.style.display="none";
    logoutBtn.style.display="none";
}

/* LOGIN SYSTEM */
if(!localStorage.getItem("hp_accounts")){
    localStorage.setItem("hp_accounts", JSON.stringify([
        { user:"Leitung", pass:"1234", role:"admin" },
        { user:"Exx", pass:"2411", role:"admin" }
    ]));
}

let activeRole=null;

/* Login */
function login(){
    const acc=JSON.parse(localStorage.getItem("hp_accounts"));
    const f=acc.find(a=>a.user===loginUser.value && a.pass===loginPass.value);

    if(!f){
        loginError.innerHTML="Falsche Zugangsdaten!";
        return;
    }

    activeRole=f.role;

    loginScreen.style.display="none";
    mainScreen.style.display="block";

    if(activeRole==="admin"){
        leaderBtn.style.display="flex";
    }

    logoutBtn.style.display="inline-block";
}

/* LOGOUT */
function logout(){
    activeRole=null;

    leaderBtn.style.display="none";
    logoutBtn.style.display="none";

    mainScreen.style.display="none";
    leaderScreen.style.display="none";

    loginUser.value="";
    loginPass.value="";

    homeScreen.style.display="block";
}

/* TABS */
function openTab(tab,btn){
    document.querySelectorAll(".formCard").forEach(c=>c.classList.remove("active"));
    document.querySelector("#tab_"+tab).classList.add("active");

    document.querySelectorAll(".tabBtn").forEach(b=>b.classList.remove("tabActive"));
    btn.classList.add("tabActive");
}

/* WEBHOOK */
const WH="https://discord.com/api/webhooks/1447266095802224862/O-pLiOSeRij0dddLycDsK5jkfajHoqbbvvRZWXJxZpZqUAxEBiEoDlC2teGBz4tFpN_l";

function sendEmbed(embed){
    fetch(WH,{method:"POST",headers:{ "Content-Type":"application/json"},body:JSON.stringify({embeds:[embed]})});
}

/* LOG SAVE */
function localLog(type,data){
    let logs=JSON.parse(localStorage.getItem("hp_logs"))||[];
    logs.unshift({type:type,data:data,time:new Date().toLocaleString()});
    localStorage.setItem("hp_logs",JSON.stringify(logs));
}

/* SEND FUNCTIONS */
function sendMelde(){
    sendEmbed({
        title:"üì¢ Meldeaufforderung",color:44799,
        fields:[
            {name:"Name",value:m_target.value},
            {name:"Melden bei",value:m_contact.value},
            {name:"Grund",value:m_reason.value},
            {name:"Von",value:m_by.value}
        ]
    });
    localLog("melde",{name:m_target.value});
    alert("Gesendet!");
}

function sendEinstellung(){
    sendEmbed({
        title:"üü© Einstellung",color:3066993,
        fields:[
            {name:"Name",value:e_name.value},
            {name:"Rang",value:e_rank.value},
            {name:"Von",value:e_by.value}
        ]
    });
    localLog("einst",{name:e_name.value});
    alert("Gesendet!");
}

function sendK√ºndigung(){
    sendEmbed({
        title:"üü• K√ºndigung",color:15158332,
        fields:[
            {name:"Name",value:k_name.value},
            {name:"Grund",value:k_reason.value},
            {name:"Von",value:k_by.value}
        ]
    });
    localLog("kuend",{name:k_name.value});
    alert("Gesendet!");
}

function sendSanktion(){
    sendEmbed({
        title:"‚ö†Ô∏è Sanktion",color:16753920,
        fields:[
            {name:"Name",value:s_name.value},
            {name:"Art",value:s_type.value},
            {name:"Sanktion",value:s_amount.value},
            {name:"Grund",value:s_reason.value},
            {name:"Von",value:s_by.value}
        ]
    });
    localLog("sank",{name:s_name.value});
    alert("Gesendet!");
}

function sendPosition(){
    sendEmbed({
        title:"üîÑ Positionswechsel",color:3447003,
        fields:[
            {name:"Name",value:p_name.value},
            {name:"Alt",value:p_old.value},
            {name:"Neu",value:p_new.value},
            {name:"Von",value:p_by.value}
        ]
    });
    localLog("pos",{name:p_name.value});
    alert("Gesendet!");
}

function sendDienstnummer(){
    sendEmbed({
        title:"üî¢ Dienstnummer-√Ñnderung",color:15844367,
        fields:[
            {name:"Name",value:d_name.value},
            {name:"Alt",value:d_old.value},
            {name:"Neu",value:d_new.value},
            {name:"Von",value:d_by.value}
        ]
    });
    localLog("dienst",{name:d_name.value});
    alert("Gesendet!");
}

/* LEADER PANEL */
function openLeader(){
    mainScreen.style.display="none";
    leaderScreen.style.display="block";
    renderLogs("all");
    loadAccounts();
}

function closeLeader(){
    leaderScreen.style.display="none";
    mainScreen.style.display="block";
}

/* LOG FILTER */
function filterLogs(type,btn){
    document.querySelectorAll(".filterBtn").forEach(b=>b.classList.remove("filterBtnActive"));
    btn.classList.add("filterBtnActive");
    renderLogs(type);
}

/* LOG RENDER */
function renderLogs(filter){
    let logs=JSON.parse(localStorage.getItem("hp_logs"))||[];
    let out="";

    logs.filter(l => filter==="all" || l.type===filter)
        .forEach(l =>{
            out+=`
            <div class="logCard">
                <h4>${l.time} ‚Äì ${l.type.toUpperCase()}</h4>
                <p><b>Name:</b> ${l.data.name}</p>
            </div>`;
        });

    logContainer.innerHTML=out||"<p>Keine Eintr√§ge.</p>";
}

/* ACCOUNT MANAGEMENT */
function loadAccounts(){
    const acc=JSON.parse(localStorage.getItem("hp_accounts"))||[];
    let out="";

    acc.forEach((a,i)=>{
        out+=`
        <div class="card" style="padding:15px;margin-bottom:12px;">
            <h3>${a.user} (${a.role})</h3>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
                <button onclick="deleteAccount(${i})">L√∂schen</button>
                <button onclick="resetPassword(${i})">Passwort √§ndern</button>
                <button onclick="changeRole(${i})">Rolle √§ndern</button>
            </div>
        </div>`;
    });

    accountList.innerHTML=out;
}

function createAccount(){
    let acc=JSON.parse(localStorage.getItem("hp_accounts"))||[];

    let u=newUser.value.trim();
    let p=newPass.value.trim();
    let r=newRole.value;

    if(!u||!p){alert("Bitte alles ausf√ºllen.");return;}

    acc.push({user:u,pass:p,role:r});
    localStorage.setItem("hp_accounts",JSON.stringify(acc));

    newUser.value="";newPass.value="";
    loadAccounts();
    alert("Account erstellt!");
}

function deleteAccount(i){
    let acc=JSON.parse(localStorage.getItem("hp_accounts"));
    if(!confirm("Account l√∂schen?"))return;

    acc.splice(i,1);
    localStorage.setItem("hp_accounts",JSON.stringify(acc));
    loadAccounts();
}

function resetPassword(i){
    let acc=JSON.parse(localStorage.getItem("hp_accounts"));
    let pw=prompt("Neues Passwort:");
    if(pw){
        acc[i].pass=pw;
        localStorage.setItem("hp_accounts",JSON.stringify(acc));
        loadAccounts();
    }
}

function changeRole(i){
    let acc=JSON.parse(localStorage.getItem("hp_accounts"));
    let r=prompt("Neue Rolle (member/trainer/admin):",acc[i].role);
    if(r){
        acc[i].role=r;
        localStorage.setItem("hp_accounts",JSON.stringify(acc));
        loadAccounts();
    }
}
</script>

</body>
</html>
